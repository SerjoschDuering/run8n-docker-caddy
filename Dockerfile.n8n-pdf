FROM docker.n8n.io/n8nio/n8n:next

# Install system tools for PDF rasterization and fonts
USER root
RUN apk add --no-cache \
    poppler-utils \
    ghostscript \
    imagemagick \
    ttf-dejavu \
    font-noto

# Install JavaScript libraries for PDF manipulation and image processing
RUN npm install -g \
    pdf-lib \
    pdf-parse \
    sharp

# Back to node user
USER node


